services:
  app:
    build: .
    ports:
      - "8080:8080"
    volumes:
      # Persist checkpoint data between container runs
      - checkpoint-data:/app/checkpoint
    # Privileged mode required for CRIU checkpoint operations
    privileged: true
    # Security options needed for CRIU
    security_opt:
      - seccomp:unconfined

volumes:
  checkpoint-data:
